
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="HTTP 402 payment workflow implementation">
      
      
        <meta name="author" content="Gengxing Pan">
      
      
      
        <link rel="prev" href="..">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>API Reference - x402-mock Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="x402-mock Documentation" class="md-header__button md-logo" aria-label="x402-mock Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            x402-mock Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenPayhub/x402-mock" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    OpenPayhub/x402-mock
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="x402-mock Documentation" class="md-nav__button md-logo" aria-label="x402-mock Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    x402-mock Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenPayhub/x402-mock" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    OpenPayhub/x402-mock
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Servers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        servers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Http402Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.add_payment_method" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_payment_method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      
        subscribe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.add_hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.payment_required" class="md-nav__link">
    <span class="md-ellipsis">
      
        payment_required
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.generate_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.verify_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.create_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        create_private_key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.save_key_to_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_key_to_env
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clients" class="md-nav__link">
    <span class="md-ellipsis">
      
        Clients
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.clients" class="md-nav__link">
    <span class="md-ellipsis">
      
        clients
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="clients">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402Client
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Http402Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.add_payment_method" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_payment_method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.request" class="md-nav__link">
    <span class="md-ellipsis">
      
        request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdapterHub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AdapterHub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.register_payment_methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        register_payment_methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.get_payment_methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_payment_methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      
        initialize
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PaymentRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry.method_register" class="md-nav__link">
    <span class="md-ellipsis">
      
        method_register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry.get_support_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_support_list
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdapterFactory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AdapterFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_balance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_balance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_balance--balance-1000000-representing-1-usdc-with-6-decimals" class="md-nav__link">
    <span class="md-ellipsis">
      
        balance = 1000000 (representing 1 USDC with 6 decimals)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.signature--permit-now-contains-complete-signed-data-ready-to-send-to-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        permit now contains complete signed data ready to send to server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.client_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        client_init
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_wallet_address" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_wallet_address
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMAdapter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EVMAdapter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--initialize-with-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initialize with environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--or-explicitly-provide-private-key-for-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Or explicitly provide private key (for testing)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--verify-permit-signature-and-on-chain-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify permit signature and on-chain state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="verify_signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature--validation-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation steps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature--amount-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amount conversion
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.get_balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_balance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.get_wallet_address" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_wallet_address
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.permit2_approve" class="md-nav__link">
    <span class="md-ellipsis">
      
        permit2_approve
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.client_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        client_init
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMPaymentComponent" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMPaymentComponent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EVMPaymentComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMPaymentComponent.validate_payment" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_payment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMVerificationResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMVerificationResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMTransactionConfirmation" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMTransactionConfirmation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.get_adapter_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_adapter_type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schemas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        schemas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel" class="md-nav__link">
    <span class="md-ellipsis">
      
        CanonicalModel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CanonicalModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_canonical_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_canonical_json
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="to_canonical_json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_canonical_json--returns-nametestvalue123" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns: '{"name":"test","value":123}'
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseSignature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseSignature.validate_format" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_format
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePermit" class="md-nav__link">
    <span class="md-ellipsis">
      
        BasePermit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePermit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePermit.validate_structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePaymentComponent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BasePaymentComponent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePaymentComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePaymentComponent.validate_payment" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_payment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.VerificationStatus" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerificationStatus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseVerificationResult
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseVerificationResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult.is_success" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_success
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult.get_error_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_error_message
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.TransactionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransactionStatus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseTransactionConfirmation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTransactionConfirmation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.is_success" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_success
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_confirmation_status
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_confirmation_status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status--may-return-transaction-confirmed-with-10-confirmations" class="md-nav__link">
    <span class="md-ellipsis">
      
        May return: "Transaction confirmed with 10 confirmations"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ClientRequestHeader" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientRequestHeader
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ServerPaymentScheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        ServerPaymentScheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.Server402ResponsePayload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server402ResponsePayload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ClientTokenRequest" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientTokenRequest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ServerTokenResponse" class="md-nav__link">
    <span class="md-ellipsis">
      
        ServerTokenResponse
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        Engine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        engine
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="engine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseEvent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseEvent.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __repr__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.RequestInitEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        RequestInitEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.RequestTokenEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        RequestTokenEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.AuthorizationSuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthorizationSuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.Http402PaymentEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402PaymentEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.VerifySuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerifySuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.VerifyFailedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerifyFailedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SettleFailedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        SettleFailedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SettleSuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        SettleSuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.Dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventBus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      
        subscribe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      
        dispatch
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenIssuedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenIssuedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BreakEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BreakEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventChain
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventChain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain.execute" class="md-nav__link">
    <span class="md-ellipsis">
      
        execute
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseException" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseException
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.AuthenticationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentMethodError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentMethodError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentSignatureError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentSignatureError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenExpiredError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenExpiredError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InvalidTokenError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidTokenError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenNotFoundError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentVerificationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentVerificationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SignatureVerificationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignatureVerificationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PermitExpiredError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PermitExpiredError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PermitNonceError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PermitNonceError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InsufficientFundsError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InsufficientFundsError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.ConfigurationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InvalidTransition" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidTransition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BlockchainInteractionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        BlockchainInteractionError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TransactionExecutionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransactionExecutionError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Servers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.servers" class="md-nav__link">
    <span class="md-ellipsis">
      
        servers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="servers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402Server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Http402Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.add_payment_method" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_payment_method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      
        subscribe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.add_hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.Http402Server.payment_required" class="md-nav__link">
    <span class="md-ellipsis">
      
        payment_required
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.generate_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate_token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.verify_token" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.create_private_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        create_private_key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.servers.save_key_to_env" class="md-nav__link">
    <span class="md-ellipsis">
      
        save_key_to_env
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clients" class="md-nav__link">
    <span class="md-ellipsis">
      
        Clients
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.clients" class="md-nav__link">
    <span class="md-ellipsis">
      
        clients
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="clients">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402Client
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Http402Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.add_payment_method" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_payment_method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.clients.Http402Client.request" class="md-nav__link">
    <span class="md-ellipsis">
      
        request
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdapterHub
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AdapterHub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.register_payment_methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        register_payment_methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.get_payment_methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_payment_methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      
        initialize
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterHub.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PaymentRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry.method_register" class="md-nav__link">
    <span class="md-ellipsis">
      
        method_register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.PaymentRegistry.get_support_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_support_list
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        AdapterFactory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AdapterFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_balance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_balance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_balance--balance-1000000-representing-1-usdc-with-6-decimals" class="md-nav__link">
    <span class="md-ellipsis">
      
        balance = 1000000 (representing 1 USDC with 6 decimals)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.signature--permit-now-contains-complete-signed-data-ready-to-send-to-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        permit now contains complete signed data ready to send to server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.client_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        client_init
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.AdapterFactory.get_wallet_address" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_wallet_address
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMAdapter
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EVMAdapter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--initialize-with-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initialize with environment variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--or-explicitly-provide-private-key-for-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Or explicitly provide private key (for testing)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter--verify-permit-signature-and-on-chain-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify permit signature and on-chain state
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        verify_signature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="verify_signature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature--validation-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validation steps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.verify_signature--amount-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amount conversion
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.settle" class="md-nav__link">
    <span class="md-ellipsis">
      
        settle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.get_balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_balance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.get_wallet_address" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_wallet_address
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.permit2_approve" class="md-nav__link">
    <span class="md-ellipsis">
      
        permit2_approve
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMAdapter.client_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        client_init
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMPaymentComponent" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMPaymentComponent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EVMPaymentComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMPaymentComponent.validate_payment" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_payment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMVerificationResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMVerificationResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.EVMTransactionConfirmation" class="md-nav__link">
    <span class="md-ellipsis">
      
        EVMTransactionConfirmation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.adapters.get_adapter_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_adapter_type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schemas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        schemas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel" class="md-nav__link">
    <span class="md-ellipsis">
      
        CanonicalModel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CanonicalModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_canonical_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_canonical_json
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="to_canonical_json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_canonical_json--returns-nametestvalue123" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns: '{"name":"test","value":123}'
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.CanonicalModel.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseSignature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseSignature.validate_format" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_format
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePermit" class="md-nav__link">
    <span class="md-ellipsis">
      
        BasePermit
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePermit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePermit.validate_structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_structure
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePaymentComponent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BasePaymentComponent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePaymentComponent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BasePaymentComponent.validate_payment" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_payment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.VerificationStatus" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerificationStatus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseVerificationResult
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseVerificationResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult.is_success" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_success
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseVerificationResult.get_error_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_error_message
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.TransactionStatus" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransactionStatus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseTransactionConfirmation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseTransactionConfirmation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.is_success" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_success
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_confirmation_status
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_confirmation_status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status--may-return-transaction-confirmed-with-10-confirmations" class="md-nav__link">
    <span class="md-ellipsis">
      
        May return: "Transaction confirmed with 10 confirmations"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ClientRequestHeader" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientRequestHeader
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ServerPaymentScheme" class="md-nav__link">
    <span class="md-ellipsis">
      
        ServerPaymentScheme
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.Server402ResponsePayload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server402ResponsePayload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ClientTokenRequest" class="md-nav__link">
    <span class="md-ellipsis">
      
        ClientTokenRequest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.schemas.ServerTokenResponse" class="md-nav__link">
    <span class="md-ellipsis">
      
        ServerTokenResponse
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        Engine
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#x402_mock.engine" class="md-nav__link">
    <span class="md-ellipsis">
      
        engine
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="engine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseEvent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseEvent.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __repr__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.RequestInitEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        RequestInitEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.RequestTokenEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        RequestTokenEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.AuthorizationSuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthorizationSuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.Http402PaymentEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Http402PaymentEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.VerifySuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerifySuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.VerifyFailedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        VerifyFailedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SettleFailedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        SettleFailedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SettleSuccessEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        SettleSuccessEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.Dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventBus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.subscribe" class="md-nav__link">
    <span class="md-ellipsis">
      
        subscribe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventBus.dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      
        dispatch
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenIssuedEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenIssuedEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BreakEvent" class="md-nav__link">
    <span class="md-ellipsis">
      
        BreakEvent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventChain
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EventChain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.EventChain.execute" class="md-nav__link">
    <span class="md-ellipsis">
      
        execute
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BaseException" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseException
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.AuthenticationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AuthenticationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentMethodError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentMethodError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentSignatureError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentSignatureError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenExpiredError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenExpiredError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InvalidTokenError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidTokenError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TokenNotFoundError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TokenNotFoundError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PaymentVerificationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PaymentVerificationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.SignatureVerificationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        SignatureVerificationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PermitExpiredError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PermitExpiredError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.PermitNonceError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PermitNonceError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InsufficientFundsError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InsufficientFundsError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.ConfigurationError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.InvalidTransition" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidTransition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.BlockchainInteractionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        BlockchainInteractionError
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x402_mock.engine.TransactionExecutionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransactionExecutionError
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference">API Reference</h1>
<p>Comprehensive API documentation for x402_mock module.</p>
<h2 id="servers">Servers</h2>
<p><strong>HTTP 402 Payment Protocol Server Implementation</strong></p>
<p>The Servers module provides a FastAPI-based server framework for implementing HTTP 402 Payment Required protocol. It offers an event-driven architecture that encapsulates all payment collection logic, allowing payment receivers to integrate cryptocurrency payment acceptance with minimal configuration.</p>
<p><strong>Key Features:</strong>
- <strong>FastAPI Integration</strong>: Extended FastAPI application with built-in payment endpoint routes
- <strong>Token Management</strong>: Secure HMAC-signed access token generation and verification
- <strong>Event-Driven Architecture</strong>: Subscribe to payment lifecycle events (request, verification, settlement)
- <strong>Multi-Chain Support</strong>: Register multiple payment methods across different blockchain networks
- <strong>Auto-Settlement</strong>: Optional automatic on-chain settlement after successful verification
- <strong>Security Utilities</strong>: Private key generation, token signing, and environment key management
- <strong>Modern EVM Signing</strong>:
  - <strong>USDC</strong>: ERC-3009 (<code>transferWithAuthorization</code>)
  - <strong>Generic ERC20</strong>: Permit2 (<code>permitTransferFrom</code>)</p>
<p><strong>Main Components:</strong>
- <code>Http402Server</code>: Main server class extending FastAPI with payment protocol support
- Security helpers: <code>generate_token()</code>, <code>verify_token()</code>, <code>create_private_key()</code>, <code>save_key_to_env()</code></p>


<div class="doc doc-object doc-module">



<h2 id="x402_mock.servers" class="doc doc-heading">
            <code>x402_mock.servers</code>


</h2>

    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="x402_mock.servers.Http402Server" class="doc doc-heading">
            <code>Http402Server</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="fastapi.FastAPI">FastAPI</span></code></p>



        <p>FastAPI server with X402 payment protocol support.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">token_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">adapter_hub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AdapterHub</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">token_expires_in</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">enable_auto_settlement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">token_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;/token&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">fastapi_kwargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize X402 payment server.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Secret key for signing access tokens</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>adapter_hub</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="AdapterHub (x402_mock.adapters.adapters_hub.AdapterHub)" href="#x402_mock.adapters.AdapterHub">AdapterHub</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Payment adapter hub (default: new instance)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token_expires_in</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token lifetime in seconds (default: 3600)</p>
              </div>
            </td>
            <td>
                  <code>3600</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_auto_settlement</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Auto-settle after verification (default: True)</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token_endpoint</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token endpoint path (default: /token)</p>
              </div>
            </td>
            <td>
                  <code>&#39;/token&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**fastapi_kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>FastAPI arguments (title, version, etc.)</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.add_payment_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_payment_method</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register a payment method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.adapters_hub.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>PaymentComponentTypes</code> instance or a plain dict
               that will be coerced into the correct type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.subscribe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">subscribe</span><span class="p">(</span><span class="n">event_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">],</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register event handler.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event type to handle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Async function(event, deps) -&gt; Optional[BaseEvent]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">my_handler</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">TokenIssuedEvent</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="n">Dependencies</span><span class="p">):</span>
    <span class="c1"># Custom logic</span>
    <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># or return another event</span>

<span class="n">app</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">TokenIssuedEvent</span><span class="p">,</span> <span class="n">my_handler</span><span class="p">)</span>
</code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.add_hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_hook</span><span class="p">(</span><span class="n">event_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">],</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register event hook for side effects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event type to hook into</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hook</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Async function(event, deps) -&gt; None</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">log_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">deps</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">add_hook</span><span class="p">(</span><span class="n">TokenIssuedEvent</span><span class="p">,</span> <span class="n">log_event</span><span class="p">)</span>
</code></pre></div>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hook</span><span class="p">(</span><span class="n">event_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Callable</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Decorator for registering event hooks.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event type to hook into</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>@app.hook(TokenIssuedEvent)
async def on_token_issued(event, deps):
    await send_analytics(event)</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.servers.Http402Server.payment_required" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">payment_required</span><span class="p">(</span><span class="n">route_handler</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Decorator to protect routes with payment verification.</p>
<p>Returns 402 response if payment required, otherwise executes handler with verified payload.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">payment_required</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/data&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_data</span><span class="p">(</span><span class="n">payload</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;address&quot;</span><span class="p">]}</span>
</code></pre></div>
</details>

    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="x402_mock.servers.generate_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_token</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expires_in</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">nonce_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generate a signed token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Secret key used to sign the token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expires_in</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token lifetime in seconds.</p>
              </div>
            </td>
            <td>
                  <code>3600</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nonce_length</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Length of random nonce.</p>
              </div>
            </td>
            <td>
                  <code>16</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signed token string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="x402_mock.servers.verify_token" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_token</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">leeway</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Verify token signature and expiration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Secret key used to verify the token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>leeway</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Allowed clock skew in seconds.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="object">object</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Decoded payload if valid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TokenExpired">TokenExpired</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If token is expired.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TokenInvalid">TokenInvalid</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If token is malformed or signature mismatch.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="x402_mock.servers.create_private_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_private_key</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span> <span class="n">use_special_chars</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generate a private key with optional prefix and randomization rules.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A custom string to prepend to the random key (semi-automatic rule).</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>length</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of random characters to generate.</p>
              </div>
            </td>
            <td>
                  <code>32</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>use_special_chars</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include special characters in the random part.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A secure private key string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="x402_mock.servers.save_key_to_env" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_key_to_env</span><span class="p">(</span><span class="n">key_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">env_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.env&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Save or update a key-value pair in a .env file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The environment variable name (e.g., "PRIVATE_KEY").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key_value</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The actual key string to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>env_file</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the .env file. Defaults to ".env".</p>
              </div>
            </td>
            <td>
                  <code>&#39;.env&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div><h2 id="clients">Clients</h2>
<p><strong>HTTP 402 Payment Client Middleware</strong></p>
<p>The Clients module provides an intelligent HTTP client that transparently handles HTTP 402 Payment Required responses. It extends <code>httpx.AsyncClient</code> to automatically intercept payment challenges, generate signed payment permits, exchange them for access tokens, and retry the original requestall without requiring explicit user intervention.</p>
<p><strong>Key Features:</strong>
- <strong>Transparent Payment Handling</strong>: Automatically processes 402 responses without manual intervention
- <strong>httpx Compatibility</strong>: Fully compatible drop-in replacement for httpx.AsyncClient
- <strong>Offline Signature Auto-Signing</strong>: Generates chain/token-specific offline authorizations (ERC-3009 / Permit2) using registered payment methods
- <strong>Token Exchange</strong>: Automatically exchanges permits for access tokens at server endpoints
- <strong>Request Retry</strong>: Seamlessly retries original requests with obtained authorization
- <strong>Multi-Chain Support</strong>: Register payment capabilities across different blockchain networks</p>
<p><strong>Main Components:</strong>
- <code>Http402Client</code>: Extended async HTTP client with automatic payment flow handling</p>
<p><strong>Usage Pattern:</strong>
1. Initialize client and register payment methods
2. Make standard HTTP requests to protected resources
3. Client automatically handles 402 challenges and obtains access
4. Receive successful responses transparently</p>


<div class="doc doc-object doc-module">



<h2 id="x402_mock.clients" class="doc doc-heading">
            <code>x402_mock.clients</code>


</h2>

    <div class="doc doc-contents first">

        <p>Client module for x402 payment authorization.</p>
<p>Provides easy-to-use interfaces for accessing protected resources
with automatic permit signing and token exchange.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="x402_mock.clients.Http402Client" class="doc doc-heading">
            <code>Http402Client</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="httpx.AsyncClient">AsyncClient</span></code></p>



        <p>Extended httpx.AsyncClient with automatic 402 payment handling.</p>
<p>This client extends httpx.AsyncClient and automatically handles 402 Payment 
Required status codes by:
1. Parsing payment requirements
2. Generating signed permits
3. Exchanging permits for access tokens
4. Retrying the original request with authorization</p>
<p>Fully compatible with httpx.AsyncClient - supports all methods, properties,
and can be used as an async context manager.</p>


<details class="usage" open>
  <summary>Usage</summary>
  <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">with</span> <span class="n">Http402Client</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">add_payment_method</span><span class="p">(</span><span class="s2">&quot;eip155:11155111&quot;</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s2">&quot;USDC&quot;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://api.example.com/data&quot;</span><span class="p">)</span>
</code></pre></div>
</details>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.clients.Http402Client.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">adapter_hub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AdapterHub</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize client with optional payment adapter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>adapter_hub</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="AdapterHub (x402_mock.adapters.adapters_hub.AdapterHub)" href="#x402_mock.adapters.AdapterHub">AdapterHub</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional AdapterHub for payment handling</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional initial authorization token</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All standard httpx.AsyncClient arguments (timeout, headers, etc.)</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.clients.Http402Client.add_payment_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_payment_method</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register local payment capability.</p>
<p>This enables the middleware to automatically generate payment permits
when encountering 402 responses.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.adapters_hub.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>PaymentComponentTypes</code> instance or a plain dict
               that will be coerced into the correct type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.clients.Http402Client.request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="n">httpx</span><span class="o">.</span><span class="n">_types</span><span class="o">.</span><span class="n">URLTypes</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Execute HTTP request with automatic 402 handling.</p>
<p>Overrides httpx.AsyncClient.request() to intercept 402 responses.
All other httpx methods (get, post, etc.) automatically use this.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP method (GET, POST, etc.)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="httpx._types.URLTypes">URLTypes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Request URL</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All standard httpx arguments</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="httpx.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>httpx.Response object</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="adapters">Adapters</h2>
<p><strong>Unified Blockchain Adapter Interface</strong></p>
<p>The Adapters module provides a unified abstraction layer that bridges differences between various blockchain platforms (EVM, Solana, etc.). It implements a plugin-based architecture with automatic blockchain type detection, enabling consistent payment permit signing, signature verification, and on-chain settlement operations across heterogeneous blockchain ecosystems.</p>
<p><strong>Key Features:</strong>
- <strong>Blockchain Abstraction</strong>: Unified interface for EVM, SVM (Solana), and other blockchain platforms
- <strong>Automatic Type Detection</strong>: Identifies blockchain type from chain identifiers (CAIP-2 format)
- <strong>Signature Operations</strong>: Generate and verify blockchain-specific cryptographic signatures
- <strong>Authorization Validation</strong>: Verify authorization authenticity, expiration, nonce, and on-chain conditions
- <strong>Transaction Settlement</strong>: Execute on-chain transfers with confirmation tracking (ERC-3009 / Permit2 on EVM)
- <strong>Balance Queries</strong>: Query token balances and allowances across different chains
- <strong>Extensible Architecture</strong>: Factory pattern enables easy addition of new blockchain adapters</p>
<p><strong>Main Components:</strong>
- <code>AdapterHub</code>: Central gateway routing operations to appropriate blockchain adapters
- <code>AdapterFactory</code>: Abstract base class defining adapter interface contracts
- <code>PaymentRegistry</code>: Manages payment method registration and retrieval
- Platform-specific adapters: <code>EVMAdapter</code> (Ethereum/EVM chains), SVM adapter (coming soon)</p>
<p><strong>Architecture Pattern:</strong>
Uses the Adapter pattern combined with Factory pattern to provide a consistent API while delegating to blockchain-specific implementations under the hood.</p>


<div class="doc doc-object doc-module">



<h2 id="x402_mock.adapters" class="doc doc-heading">
            <code>x402_mock.adapters</code>


</h2>

    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.AdapterHub" class="doc doc-heading">
            <code>AdapterHub</code>


</h3>


    <div class="doc doc-contents ">



        <p>Unified Blockchain Adapter Hub.</p>
<p>Provides core blockchain adapter operations with automatic type detection and routing.
Manages payment component registration and delegates to blockchain-specific adapters.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">evm_private_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the hub with a payment registry and chain-specific adapter instances.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>evm_private_key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Private key used by the EVM adapter for on-chain operations.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_timeout</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP request timeout (seconds) forwarded to each adapter.</p>
              </div>
            </td>
            <td>
                  <code>60</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.register_payment_methods" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_payment_methods</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span> <span class="n">client_role</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register a payment component into the hub under the given role.</p>
<p><strong>Server role</strong> (<code>client_role=False</code>, default): if <code>pay_to</code> is not set on
the component, it is automatically filled with the wallet address returned by
the matching chain adapter.  Use this when the hub acts as the receiving party.</p>
<p><strong>Client role</strong> (<code>client_role=True</code>): <code>pay_to</code> is left untouched.  Use this
when the hub acts as the signing/paying party and the recipient address will
come from the remote server's payment requirements.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>PaymentComponentTypes</code> instance or a plain dict
               that will be coerced into the correct type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>client_role</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>False</code> (default) for server role; <code>True</code> for client role.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the blockchain type cannot be determined from the component,
       or if no adapter is registered for that type.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the component cannot be parsed or fails chain validation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.get_payment_methods" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_payment_methods</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">]</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get all registered payment methods.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of registered payment components</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.initialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize</span><span class="p">(</span><span class="n">client_role</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>One-time startup initialisation gated by caller role.</p>
<p>Must be called once before signature() when operating as the signing
party (client).  For each registered adapter, the chain-specific
<code>client_init()</code> hook is invoked so it can ensure any required
on-chain state is in place (e.g. Permit2 ERC-20 allowances for EVM).</p>
<p>Server-side roles (verify_signature / settle) do not require this call
and may pass <code>client_role=False</code> to skip the adapter hooks while still
marking the hub as initialised for completeness.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>client_role</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>True</code> triggers adapter pre-signing setup;
         <code>False</code> (default) skips the hooks (no on-chain writes needed).</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any adapter's client_init() fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.verify_signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_signature</span><span class="p">(</span><span class="n">permit_payload</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PermitTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Verify permit signature with automatic blockchain detection and component matching.</p>
<p>Converts permit payload to typed model, matches token with registered components,
and calls corresponding adapter to verify signature.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit_payload</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PermitTypes">PermitTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Permit data (PermitTypes or dict)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Verification result from adapter</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If blockchain type cannot be determined</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If payload conversion or token matching fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.settle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">settle</span><span class="p">(</span><span class="n">permit_payload</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PermitTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Execute permit settlement with automatic type conversion.</p>
<p>Converts permit payload to typed model and calls corresponding adapter.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit_payload</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PermitTypes">PermitTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Permit data (PermitTypes or dict)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction confirmation from server adapter</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If blockchain type cannot be determined</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If payload conversion fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterHub.signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">signature</span><span class="p">(</span><span class="n">list_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="n">PermitTypes</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generate signed permit from remote payment components.</p>
<p>Matches remote components against local support list, converts to typed model,
and delegates to blockchain-specific adapter for signing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>list_components</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Remote payment components (typed or dict) to match
             against locally registered ones.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="x402_mock.adapters.unions.PermitTypes">PermitTypes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signed permit produced by the matching chain adapter.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no matching component is found or type conversion fails.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the blockchain type cannot be determined.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.PaymentRegistry" class="doc doc-heading">
            <code>PaymentRegistry</code>


</h3>


    <div class="doc doc-contents ">



        <p>Central registry that aggregates payment components across all supported blockchain types.</p>
<p>Routes each submitted payment component to the appropriate chain-specific registry
(e.g. EVM, and future chains such as Solana) and maintains a unified support list.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.PaymentRegistry.method_register" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">method_register</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register a payment component into the appropriate chain-specific registry.</p>
<p>Accepts either a validated payment component instance or a raw dict that will
be coerced into the correct type via Pydantic's discriminated union.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>PaymentComponentTypes</code> instance or a plain dict
               with the necessary fields to construct one.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the dict cannot be parsed into a known payment component type,
        or if the component fails chain-specific validation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.PaymentRegistry.get_support_list" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_support_list</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">PaymentComponentTypes</span><span class="p">]</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return all registered payment components across all supported chain types.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An ordered list of every payment component that has been successfully registered.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.AdapterFactory" class="doc doc-heading">
            <code>AdapterFactory</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract Base Class for Server-Side Blockchain Adapters.</p>
<p>Defines the interface for server-side operations that interact directly with blockchain nodes.
Server-side adapters are responsible for:
- Verifying permit signatures and permit validity on-chain
- Executing transactions (settle/send_transaction) on-chain
- Querying token balances and other on-chain state</p>
<p>Server adapters use the application's private key to sign and send transactions.
They act as the bridge between the x402 system and the blockchain.</p>
<p>Key Responsibilities:
1. verify_signature: Validate permit signature and check permit conditions on-chain
2. settle: Execute the permit transaction on-chain and return confirmation
3. get_balance: Query token balance of an address on-chain
4. signature: Support signing operations for blockchain-specific formats</p>


<details class="example-implementation" open>
  <summary>Example Implementation</summary>
  <p>class EVMServerAdapter(AdapterServerFactory):
    # EVM/Ethereum-specific implementation
    pass</p>
<p>class SolanaServerAdapter(AdapterServerFactory):
    # Solana-specific implementation
    pass</p>
</details>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.verify_signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_signature</span><span class="p">(</span><span class="n">permit</span><span class="p">:</span> <span class="n">BasePermit</span><span class="p">,</span> <span class="n">payment_requirement</span><span class="p">:</span> <span class="n">BasePaymentComponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseVerificationResult</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Verify permit signature validity and check permit conditions on-chain.</p>
<p>This is the critical security operation that ensures:
1. The permit signature is cryptographically valid
2. The recovered signer matches the permit owner
3. The permit has not expired
4. The nonce prevents replay attacks
5. The owner has sufficient balance and allowance
6. The payment amount matches or exceeds requirements</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePermit (x402_mock.schemas.bases.BasePermit)" href="#x402_mock.schemas.BasePermit">BasePermit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>BasePermit instance containing permit data and signature</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>payment_requirement</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>BasePaymentComponent specifying expected payment amount/conditions</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>BaseVerificationResult</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseVerificationResult (x402_mock.schemas.bases.BaseVerificationResult)" href="#x402_mock.schemas.BaseVerificationResult">BaseVerificationResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detailed verification result including:
- status: Verification result status (SUCCESS, INVALID_SIGNATURE, EXPIRED, etc.)
- is_valid: Boolean indicating if permit is valid
- permit_owner: Verified owner address
- authorized_amount: Verified authorized amount
- message: Human-readable status message
- blockchain_state: Optional on-chain state data</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="implementation-notes" open>
  <summary>Implementation Notes</summary>
  <ul>
<li>Must recover the signer from signature</li>
<li>Must verify signature against permit data hash</li>
<li>Must check permit.is_expired()</li>
<li>Must query on-chain state (nonce, allowance, balance)</li>
<li>Must validate payment amount meets requirements</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <p>result = await adapter.verify_signature(permit, payment_req)
if result.is_success():
    # Permit is valid, proceed to settlement
    await adapter.settle(permit)
else:
    # Return verification error to client
    error_msg = result.get_error_message()</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.settle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">settle</span><span class="p">(</span><span class="n">permit</span><span class="p">:</span> <span class="n">BasePermit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseTransactionConfirmation</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Execute permit transaction on-chain (settlement/transaction execution).</p>
<p>This method actually executes the token transfer on-chain using the permit signature.
It should only be called after verify_signature has confirmed the permit is valid.</p>
<p>Steps:
1. Construct permit() call with signature components (v, r, s)
2. Build the complete transaction (gas estimation, nonce, etc.)
3. Sign transaction with server's private key
4. Broadcast transaction to blockchain
5. Wait for transaction confirmation
6. Return transaction confirmation with hash and receipt data</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePermit (x402_mock.schemas.bases.BasePermit)" href="#x402_mock.schemas.BasePermit">BasePermit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>BasePermit instance with valid signature (assumed verified)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>BaseTransactionConfirmation</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseTransactionConfirmation (x402_mock.schemas.bases.BaseTransactionConfirmation)" href="#x402_mock.schemas.BaseTransactionConfirmation">BaseTransactionConfirmation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction execution result including:
- status: Transaction status (SUCCESS, FAILED, PENDING, etc.)
- tx_hash: Transaction hash on-chain
- block_number: Block number containing transaction
- block_timestamp: Block timestamp
- gas_used: Actual gas consumed
- confirmations: Number of block confirmations
- error_message: Error details if transaction failed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="implementation-notes" open>
  <summary>Implementation Notes</summary>
  <ul>
<li>Estimate gas before sending</li>
<li>Sign transaction with server private key</li>
<li>Handle blockchain-specific transaction formats</li>
<li>Wait for configurable number of confirmations</li>
<li>Handle network errors gracefully</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <p>result = await adapter.settle(permit)
if result.is_success():
    print(f"Settlement complete: {result.tx_hash}")
    # Update database with tx_hash
else:
    print(f"Settlement failed: {result.error_message}")</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.get_balance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_balance</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Query token balance for an address on the blockchain.</p>
<p>Retrieves the current balance of the configured token (typically USDC) for the given address.
This is used for:
- Verification: Check owner has sufficient balance
- Queries: Allow clients to check addresses' balances</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wallet address to query (blockchain format, e.g., "0x..." for EVM)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token balance in smallest units (e.g., wei for EVM where 1 USDC = 1e6)
 Returns 0 if address has no balance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="implementation-notes" open>
  <summary>Implementation Notes</summary>
  <ul>
<li>Use blockchain node RPC call (balanceOf for ERC20)</li>
<li>Handle address validation/checksum</li>
<li>Cache results if possible for performance</li>
<li>Handle blockchain-specific address formats</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <p>balance = await adapter.get_balance("0x1234...5678")</p>
<h5 id="x402_mock.adapters.AdapterFactory.get_balance--balance-1000000-representing-1-usdc-with-6-decimals">balance = 1000000 (representing 1 USDC with 6 decimals)</h5>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">signature</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">BasePaymentComponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BasePermit</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generate complete signed permit from payment component.</p>
<p>This method builds the permit message, signs it with user's private key/wallet,
and returns a fully signed and ready-to-submit permit object.
All permit parameters are derived from the payment_component.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>BasePaymentComponent specifying payment requirements, 
              blockchain type, and all permit parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>BasePermit</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="BasePermit (x402_mock.schemas.bases.BasePermit)" href="#x402_mock.schemas.BasePermit">BasePermit</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fully signed permit ready for server submission. For EVM, this is EIP2612Permit with:
- owner: Token owner address
- spender: Authorized spender address
- token: Token contract address
- value: Authorized amount
- deadline: Permit expiration timestamp
- nonce: Replay attack prevention nonce
- signature: EIP2612PermitSignature with v, r, s components
- permit_type: Blockchain-specific type (e.g., "EIP2612")</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="implementation-notes" open>
  <summary>Implementation Notes</summary>
  <ul>
<li>Extract all permit parameters from payment_component</li>
<li>Must validate payment_component matches the adapter's blockchain type</li>
<li>Must build blockchain-specific permit message internally</li>
<li>Must sign with user's private key (not server's)</li>
<li>Must validate signature format before returning</li>
<li>Must return complete permit with signature components</li>
<li>Should not leak private key</li>
</ul>
</details>

<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If payment_component blockchain type doesn't match adapter</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If payment_component is invalid or signing fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>adapter = EVMClientAdapter()
payment = EVMPaymentComponent(payment_type="evm", ...)
permit = await adapter.signature(payment_component=payment)</p>
<h5 id="x402_mock.adapters.AdapterFactory.signature--permit-now-contains-complete-signed-data-ready-to-send-to-server">permit now contains complete signed data ready to send to server</h5>
<p>await server.settle(permit)</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.client_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">client_init</span><span class="p">(</span><span class="n">payment_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePaymentComponent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>One-time client-side pre-signing initialisation hook.</p>
<p>Called by AdapterHub.initialize(role="client") once at startup, before
any signature() calls are made.  Concrete adapters should override this
to perform chain-specific on-chain setup required by the signing role
(e.g. ERC-20 allowance approval for Permit2 on EVM, SPL token delegation
on SVM).  The default implementation is a no-op so that server-only
adapters and future adapters can inherit without modification.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_components</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All payment components registered via
register_payment_methods(). The implementation may filter
these down to the subset it manages.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any required on-chain setup fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.AdapterFactory.get_wallet_address" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_wallet_address</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get server wallet address from private key.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Server wallet address in checksum format</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.EVMAdapter" class="doc doc-heading">
            <code>EVMAdapter</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AdapterFactory (x402_mock.adapters.bases.AdapterFactory)" href="#x402_mock.adapters.AdapterFactory">AdapterFactory</a></code></p>



        <p>EVM Blockchain Server Adapter Implementation.</p>
<p>Provides complete server-side functionality for EVM blockchains including:
- EIP2612 permit signature verification
- On-chain state validation (nonce, allowance, balance, expiration)
- Token transfer execution via signed permits
- Balance and allowance queries</p>
<p>This adapter validates all security constraints before executing any on-chain operations.
All methods are designed to return clear, actionable error messages rather than raising exceptions.</p>
<p>Key Design Features:
- Dynamic RPC URL selection based on permit's chain_id
- Environment-aware infrastructure key handling (evm_infra_key for premium RPC, falls back to public)
- Private key loaded from environment (evm_private_key) during initialization
- Lazy Web3 instance creation per blockchain interaction (ensures correct RPC endpoint)</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMAdapter.account">account</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Server's account object (initialized from evm_private_key environment variable)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMAdapter.address">address</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Checksum-formatted server account address</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMAdapter._infra_key">_infra_key</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional infrastructure API key for premium RPC endpoints</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="environment-variables" open>
  <summary>Environment Variables</summary>
  <ul>
<li>evm_private_key: Server's EVM private key for signing transactions (required)</li>
<li>evm_infra_key: Optional infrastructure API key (e.g., Alchemy/Infura key)
                If not set, falls back to public RPC endpoints</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <h4 id="x402_mock.adapters.EVMAdapter--initialize-with-environment-variables">Initialize with environment variables</h4>
<p>adapter = EVMServerAdapter()  # Loads evm_private_key automatically</p>
<h4 id="x402_mock.adapters.EVMAdapter--or-explicitly-provide-private-key-for-testing">Or explicitly provide private key (for testing)</h4>
<p>adapter = EVMServerAdapter(private_key="0x...")</p>
<h4 id="x402_mock.adapters.EVMAdapter--verify-permit-signature-and-on-chain-state">Verify permit signature and on-chain state</h4>
<p>result = await adapter.verify_signature(permit, payment_requirement)
if result.is_success():
    # Execute the permit on-chain
    confirmation = await adapter.settle(permit)</p>
</details>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">private_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize EVM Server Adapter with environment-aware configuration.</p>
<p>This constructor implements a flexible initialization pattern:
1. Accepts optional <code>private_key</code> parameter (useful for testing).
2. Falls back to the <code>evm_private_key</code> environment variable if not provided.
3. Initializes the server account object from the resolved private key.</p>
<p>Token address and RPC URL are <strong>not</strong> stored at initialization time.  They are
supplied call-by-call via the <code>rpc_url</code> field of :class:<code>EVMPaymentComponent</code>
(or the permit object) during :meth:<code>verify_signature</code> and :meth:<code>settle</code>.  This
design lets a single adapter instance handle arbitrary EVM networks without
reconfiguration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Server's private key in 0x-prefixed hex format.  When omitted,
the value of the <code>evm_private_key</code> environment variable is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>request_timeout</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>HTTP request timeout in seconds passed to every
:class:<code>AsyncWeb3</code> provider created by this instance (default <code>60</code>).</p>
              </div>
            </td>
            <td>
                  <code>60</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If neither <code>private_key</code> nor the <code>evm_private_key</code> environment
variable is present, or if the key format is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">signature</span><span class="p">(</span><span class="n">payment_component</span><span class="p">:</span> <span class="n">EVMPaymentComponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">ERC3009Authorization</span><span class="p">,</span> <span class="n">Permit2Signature</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generate a signed authorization for the given payment component.</p>
<p>Scheme selection is based on the payment component's <code>currency</code>:
- USDC, EURC (and other ERC-3009 compatible tokens): ERC-3009
  <code>transferWithAuthorization</code> is preferred.
- All other tokens: Permit2 <code>permitTransferFrom</code> is used as fallback.</p>
<p>Signing is performed entirely in-process via <code>sign_universal</code>.  The chain
ID is parsed from <code>payment_component.caip2</code> via
<code>parse_caip2_eip155_chain_id</code>; no <code>metadata</code> dict is accessed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_component</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMPaymentComponent (x402_mock.adapters.evm.schemas.EVMPaymentComponent)" href="#x402_mock.adapters.EVMPaymentComponent">EVMPaymentComponent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>:class:<code>EVMPaymentComponent</code> supplying all required
signing parameters as first-class fields:</p>
<ul>
<li><code>token</code>  ERC-20 contract address to authorize.</li>
<li><code>caip2</code>  CAIP-2 chain identifier (e.g. <code>"eip155:11155111"</code>);
  the numeric chain ID is extracted automatically.</li>
<li><code>pay_to</code>  recipient / spender address that receives the
  authorization (server wallet address on the counterparty side).</li>
<li><code>amount</code>  human-readable payment amount (e.g. <code>1.5</code> for
  1.5 USDC); converted to smallest token units using
  <code>token_decimals</code>.</li>
<li><code>token_decimals</code>  decimal precision of the token (e.g. <code>6</code>
  for USDC).</li>
<li><code>currency</code>  currency code used to select the signing scheme
  (e.g. <code>"USDC"</code> triggers ERC-3009; others fall back to Permit2).</li>
<li><code>token_name</code>  EIP-712 domain name of the token contract
  (required for ERC-3009 domain separator; unused for Permit2).</li>
<li><code>token_version</code>  EIP-712 domain version string (required for
  ERC-3009; unused for Permit2).</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.evm.schemas.ERC3009Authorization">ERC3009Authorization</span>, <span title="x402_mock.adapters.evm.schemas.Permit2Signature">Permit2Signature</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>ERC3009Authorization</code> when the currency supports ERC-3009;</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.evm.schemas.ERC3009Authorization">ERC3009Authorization</span>, <span title="x402_mock.adapters.evm.schemas.Permit2Signature">Permit2Signature</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>Permit2Signature</code> otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the chain is unsupported or required fields are invalid.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the private key is not available.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.verify_signature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_signature</span><span class="p">(</span><span class="n">permit</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ERC3009Authorization</span><span class="p">,</span> <span class="n">Permit2Signature</span><span class="p">],</span> <span class="n">payment_requirement</span><span class="p">:</span> <span class="n">EVMPaymentComponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EVMVerificationResult</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Verify a signed authorization and validate payment constraints.</p>
<p>Accepts the direct output of :meth:<code>signature</code>  either an
<code>ERC3009Authorization</code> or a <code>Permit2Signature</code>  and verifies it
using :func:<code>verify_universal</code>.</p>
<h6 id="x402_mock.adapters.EVMAdapter.verify_signature--validation-steps">Validation steps</h6>
<ol>
<li><strong>Type check</strong> - <code>permit</code> must be <code>ERC3009Authorization</code> or
   <code>Permit2Signature</code>.</li>
<li><strong>Receiver check</strong> - the <code>recipient</code> / <code>spender</code> field must
   match the server's wallet address.</li>
<li><strong>Amount check</strong> - the authorized value (smallest token unit) must
   be <code>&gt;=</code> the required amount derived from
   <code>payment_requirement.amount</code> (human-readable USDC).</li>
<li><strong>Balance check</strong> - the on-chain token balance of the sender must
   cover the required amount.</li>
<li><strong>Signature + expiry</strong> - delegates to :func:<code>verify_universal</code>,
   which reconstructs the EIP-712 struct, recovers the signer, and
   checks the time window / deadline.</li>
</ol>
<h6 id="x402_mock.adapters.EVMAdapter.verify_signature--amount-conversion">Amount conversion</h6>
<p><code>payment_requirement.amount</code> is a human-readable USDC quantity
(e.g. <code>1.5</code> for 1.5 USDC).  It is converted to the smallest token
unit via :func:<code>amount_to_value</code> using <code>payment_requirement.metadata
["decimals"]</code> (defaults to <code>6</code> for USDC).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.evm.schemas.ERC3009Authorization">ERC3009Authorization</span>, <span title="x402_mock.adapters.evm.schemas.Permit2Signature">Permit2Signature</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ERC3009Authorization or Permit2Signature produced by
:meth:<code>signature</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>payment_requirement</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMPaymentComponent (x402_mock.adapters.evm.schemas.EVMPaymentComponent)" href="#x402_mock.adapters.EVMPaymentComponent">EVMPaymentComponent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EVMPaymentComponent describing the expected
payment (human-readable <code>amount</code>, <code>decimals</code> in metadata).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMVerificationResult (x402_mock.adapters.evm.schemas.EVMVerificationResult)" href="#x402_mock.adapters.EVMVerificationResult">EVMVerificationResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EVMVerificationResult with <code>is_valid=True</code> and</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMVerificationResult (x402_mock.adapters.evm.schemas.EVMVerificationResult)" href="#x402_mock.adapters.EVMVerificationResult">EVMVerificationResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><code>status=SUCCESS</code> if all checks pass; otherwise a descriptive</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMVerificationResult (x402_mock.adapters.evm.schemas.EVMVerificationResult)" href="#x402_mock.adapters.EVMVerificationResult">EVMVerificationResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>failure result.  No exceptions are raised.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.settle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">settle</span><span class="p">(</span><span class="n">permit</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ERC3009Authorization</span><span class="p">,</span> <span class="n">Permit2Signature</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">EVMTransactionConfirmation</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Execute on-chain token transfer to settle a payment authorization.</p>
<p>Dispatches to the appropriate settlement strategy based on permit type:</p>
<ul>
<li><strong>ERC3009Authorization</strong>  calls <code>transferWithAuthorization</code> directly
  on the token contract (ERC-3009 path, supported by USDC / EURC).</li>
<li><strong>Permit2Signature</strong>  calls <code>permitTransferFrom</code> on the Uniswap
  Permit2 singleton contract.</li>
</ul>
<p>Both paths share the same receipt-polling and confirmation-building
logic via :meth:<code>_send_and_confirm</code>.</p>
<p>Chain handling is fully dynamic: the Web3 RPC instance is resolved from
<code>permit.chain_id</code> at call time, with optional premium infra key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>permit</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.evm.schemas.ERC3009Authorization">ERC3009Authorization</span>, <span title="x402_mock.adapters.evm.schemas.Permit2Signature">Permit2Signature</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signed authorization produced by :meth:<code>signature</code>  either
<code>ERC3009Authorization</code> or <code>Permit2Signature</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMTransactionConfirmation (x402_mock.adapters.evm.schemas.EVMTransactionConfirmation)" href="#x402_mock.adapters.EVMTransactionConfirmation">EVMTransactionConfirmation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>class:<code>EVMTransactionConfirmation</code> with <code>status=SUCCESS</code> and</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMTransactionConfirmation (x402_mock.adapters.evm.schemas.EVMTransactionConfirmation)" href="#x402_mock.adapters.EVMTransactionConfirmation">EVMTransactionConfirmation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>populated receipt fields on success, or a descriptive failure result.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="EVMTransactionConfirmation (x402_mock.adapters.evm.schemas.EVMTransactionConfirmation)" href="#x402_mock.adapters.EVMTransactionConfirmation">EVMTransactionConfirmation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>No exceptions are raised; all errors are captured in the return value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.get_balance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_balance</span><span class="p">(</span><span class="n">address</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">token_address</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">web3</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AsyncWeb3</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Query token balance for an address on-chain.</p>
<p>This method is designed to work in two modes:
1. With explicit parameters (token_address and web3) - for internal use
2. With just address - for external API use (not recommended without context)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wallet address to query (0x-prefixed hex format)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token_address</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token contract address (optional, for explicit chain/token context)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>web3</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="web3.AsyncWeb3">AsyncWeb3</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>AsyncWeb3 instance (optional, created dynamically if not provided)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token balance in smallest units (0 if address has no balance or error occurs)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>When called from external code without token_address and web3, the method
cannot determine which chain to query. Consider refactoring external calls
to provide these parameters explicitly.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.get_wallet_address" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_wallet_address</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get server wallet address from private key.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Server wallet address in checksum format</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.permit2_approve" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">permit2_approve</span><span class="p">(</span><span class="n">chain_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">token_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TxReceipt</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Asynchronously signs and broadcasts an ERC20 approve transaction.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>chain_id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The EVM chain ID (e.g., 1 for Ethereum, 11155111 for Sepolia).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>token_addr</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The contract address of the ERC20 token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The raw amount (in wei) to approve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMAdapter.client_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">client_init</span><span class="p">(</span><span class="n">payment_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePaymentComponent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>EVM-specific client-side pre-signing initialisation.</p>
<p>Iterates all registered EVMPaymentComponents and, for each currency
that requires the Permit2 protocol (i.e. is NOT natively ERC-3009),
queries the current ERC-20 allowance granted to the Permit2 singleton.
If the allowance is below <code>_LOW_ALLOWANCE_THRESHOLD</code>, an on-chain
<code>approve(permit2, uint256_max)</code> transaction is broadcast and awaited
before returning.</p>
<p>This must be called once at startup (via AdapterHub.initialize()) before
any signature() calls are made.  Skipped automatically for ERC-3009
currencies (USDC, EURC, ) because those use gasless transferWithAuthorization
and do not require a prior on-chain approval.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payment_components</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>All components returned by
register_payment_methods().  Non-EVM items are silently skipped.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any approval transaction is broadcast but reverts
on-chain (propagated from approve_erc20).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Web3Exception">Web3Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the RPC allowance query fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.EVMPaymentComponent" class="doc doc-heading">
            <code>EVMPaymentComponent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a></code></p>



        <p>EVM-Specific Payment Component.</p>
<p>Extends BasePaymentComponent with EVM-specific payment requirements including
token contract address, chain identifier (CAIP-2), and an optional recipient address.
Typically used for USDC payments on EVM networks (Ethereum, Sepolia, etc.).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.payment_type">payment_type</span></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;evm&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always "evm" for this implementation</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.amount">amount</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Payment amount for human readability (e.g., 1.0 for 1 USDC)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.currency">currency</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Currency code (typically "USD" for stablecoins)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.metadata">metadata</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional payment metadata (may include gas limits, fees, etc.)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when payment component was created</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.token">token</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token contract address on specific EVM chain (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.caip2">caip2</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CAIP-2 chain identifier (e.g., "eip155:1", "eip155:11155111") (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.pay_to">pay_to</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional recipient address to pay to (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.rpc_url">rpc_url</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional EVM RPC URL for this payment (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.token_name">token_name</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional token name (e.g., "USDC") (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.token_decimals">token_decimals</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional token decimals (string or int) (EVM-specific)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMPaymentComponent.token_version">token_version</span></code></td>
            <td>
                  <code><span title="str">str</span> | <span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional token version (string or int) (EVM-specific)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>payment = EVMPaymentComponent(
    payment_type="evm",
    amount=1.0,  # 1 USDC
    currency="USD",
    token="0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
    caip2="eip155:11155111",
    metadata={"gas_price": "20", "priority_fee": "2"}
)</p>
</details>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.adapters.EVMPaymentComponent.validate_payment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_payment</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate EVM payment specification.</p>
<p>Checks that:
- payment_type is "evm" 
- amount is non-negative
- token is valid EVM address format (0x...)
- caip2 is a valid CAIP-2 identifier for EVM chains (eip155:<chain_id>)
- pay_to is either None or a valid EVM address format (0x...)</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if payment specification is valid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>With descriptive message if validation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.EVMVerificationResult" class="doc doc-heading">
            <code>EVMVerificationResult</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseVerificationResult (x402_mock.schemas.bases.BaseVerificationResult)" href="#x402_mock.schemas.BaseVerificationResult">BaseVerificationResult</a></code></p>



        <p>Unified EVM signature verification result.</p>
<p>Covers all EVM signing schemes (ERC-3009, Permit2, EIP-2612).  Uses
scheme-neutral field names that mirror <code>sign_universal</code> /
<code>verify_universal</code>:</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMVerificationResult.verification_type">verification_type</span></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;evm&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always <code>"evm"</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMVerificationResult.sender">sender</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token owner / authorizer address that produced the
               signature.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMVerificationResult.receiver">receiver</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Destination / authorised spender address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMVerificationResult.authorized_amount">authorized_amount</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transfer amount in the token's smallest unit.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMVerificationResult.blockchain_state">blockchain_state</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional on-chain state snapshot (balance, nonce,
               allowance, etc.).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.adapters.EVMTransactionConfirmation" class="doc doc-heading">
            <code>EVMTransactionConfirmation</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTransactionConfirmation (x402_mock.schemas.bases.BaseTransactionConfirmation)" href="#x402_mock.schemas.BaseTransactionConfirmation">BaseTransactionConfirmation</a></code></p>



        <p>EVM-Specific Transaction Confirmation.</p>
<p>Extends BaseTransactionConfirmation with EVM-specific transaction receipt data.
Returned by EVMServerAdapter.settle() method.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.confirmation_type">confirmation_type</span></code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;evm&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Always "evm" for this implementation</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.status">status</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TransactionStatus (x402_mock.schemas.bases.TransactionStatus)" href="#x402_mock.schemas.TransactionStatus">TransactionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction execution status (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.execution_time">execution_time</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time taken to confirm transaction (seconds) (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.confirmations">confirmations</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of block confirmations (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.error_message">error_message</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error details if transaction failed (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.logs">logs</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction logs/events (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when confirmation was recorded (inherited from BaseTransactionConfirmation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.tx_hash">tx_hash</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction hash (0x-prefixed hex string on EVM)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.block_number">block_number</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block number containing transaction</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.block_timestamp">block_timestamp</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Block timestamp (Unix)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.gas_used">gas_used</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Actual gas consumed by transaction</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.gas_limit">gas_limit</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Gas limit specified for transaction</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.transaction_fee">transaction_fee</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amount of ETH/native token paid as transaction fee (in wei)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.from_address">from_address</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction sender address</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.adapters.EVMTransactionConfirmation.to_address">to_address</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction receiver/contract address</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>confirmation = await evm_adapter.settle(permit)
if confirmation.is_success():
    print(f"Settlement confirmed: {confirmation.tx_hash}")
    print(f"Gas used: {confirmation.gas_used}")
else:
    print(f"Settlement failed: {confirmation.error_message}")</p>
</details>










<div class="doc doc-children">












  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="x402_mock.adapters.get_adapter_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_adapter_type</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PermitTypes</span><span class="p">,</span> <span class="n">PaymentComponentTypes</span><span class="p">,</span> <span class="n">SignatureTypes</span><span class="p">,</span> <span class="n">VerificationResultTypes</span><span class="p">,</span> <span class="n">TransactionConfirmationTypes</span><span class="p">,</span> <span class="n">BasePermit</span><span class="p">,</span> <span class="n">BasePaymentComponent</span><span class="p">,</span> <span class="n">BaseVerificationResult</span><span class="p">,</span> <span class="n">BaseTransactionConfirmation</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Retrieve the unified adapter type identifier for a given permit, payment component, 
signature, verification result, or transaction confirmation.</p>
<p>Automatically extracts the type discriminator field (permit_type, payment_type, 
signature_type, verification_type, or confirmation_type) from the object and returns 
the standardized adapter type string that can be used as a key in 
AdapterHub._adapter_factories.</p>
<p>This function maps all blockchain-specific discriminator values to their unified
adapter type identifiers (e.g., "EIP2612" -&gt; "evm", "polygon" -&gt; "evm", "spl" -&gt; "svm").</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="x402_mock.adapters.unions.PermitTypes">PermitTypes</span>, <span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>, <span title="x402_mock.adapters.unions.SignatureTypes">SignatureTypes</span>, <span title="x402_mock.adapters.unions.VerificationResultTypes">VerificationResultTypes</span>, <span title="x402_mock.adapters.unions.TransactionConfirmationTypes">TransactionConfirmationTypes</span>, <a class="autorefs autorefs-internal" title="BasePermit (x402_mock.schemas.bases.BasePermit)" href="#x402_mock.schemas.BasePermit">BasePermit</a>, <a class="autorefs autorefs-internal" title="BasePaymentComponent (x402_mock.schemas.bases.BasePaymentComponent)" href="#x402_mock.schemas.BasePaymentComponent">BasePaymentComponent</a>, <a class="autorefs autorefs-internal" title="BaseVerificationResult (x402_mock.schemas.bases.BaseVerificationResult)" href="#x402_mock.schemas.BaseVerificationResult">BaseVerificationResult</a>, <a class="autorefs autorefs-internal" title="BaseTransactionConfirmation (x402_mock.schemas.bases.BaseTransactionConfirmation)" href="#x402_mock.schemas.BaseTransactionConfirmation">BaseTransactionConfirmation</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A permit, payment component, signature, verification result, or transaction
 confirmation instance containing a type discriminator field. Supports both 
 typed instances and base classes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The unified adapter type string (e.g., "evm", "svm") that corresponds to</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the object's blockchain type. Returns None if no matching adapter type is found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># EIP-2612 permit maps to &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">permit</span> <span class="o">=</span> <span class="n">EIP2612Permit</span><span class="p">(</span><span class="n">permit_type</span><span class="o">=</span><span class="s2">&quot;EIP2612&quot;</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="s2">&quot;0x...&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter_type</span> <span class="o">=</span> <span class="n">get_adapter_type</span><span class="p">(</span><span class="n">permit</span><span class="p">)</span>  <span class="c1"># Returns &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">_adapter_factories</span><span class="p">[</span><span class="n">adapter_type</span><span class="p">]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># EVM payment component maps to &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">component</span> <span class="o">=</span> <span class="n">EVMPaymentComponent</span><span class="p">(</span><span class="n">payment_type</span><span class="o">=</span><span class="s2">&quot;evm&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="s2">&quot;0x...&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter_type</span> <span class="o">=</span> <span class="n">get_adapter_type</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>  <span class="c1"># Returns &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">_adapter_factories</span><span class="p">[</span><span class="n">adapter_type</span><span class="p">]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># EVM verification result maps to &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">EVMVerificationResult</span><span class="p">(</span><span class="n">verification_type</span><span class="o">=</span><span class="s2">&quot;evm&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter_type</span> <span class="o">=</span> <span class="n">get_adapter_type</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>  <span class="c1"># Returns &quot;evm&quot;</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Polygon payment also maps to &quot;evm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">component</span> <span class="o">=</span> <span class="n">EVMPaymentComponent</span><span class="p">(</span><span class="n">payment_type</span><span class="o">=</span><span class="s2">&quot;polygon&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter_type</span> <span class="o">=</span> <span class="n">get_adapter_type</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>  <span class="c1"># Returns &quot;evm&quot;</span>
</code></pre></div>


<details class="note" open>
  <summary>Note</summary>
  <p>The type mapping is lazily initialized on first call to avoid circular imports.
To add support for new blockchains, update _initialize_adapter_type_mapping()
with new type mappings in ADAPTER_TYPE_MAPPING.</p>
</details>

    </div>

</div>



  </div>

    </div>

</div><h2 id="schemas">Schemas</h2>
<p><strong>Base Schema Models and Type System</strong></p>
<p>The Schemas module defines the foundational type system and data models that underpin the entire x402_mock framework. It provides RFC8785-compliant Pydantic models for cryptographic operations, abstract base classes ensuring type safety across blockchain implementations, and standardized HTTP protocol message formats.</p>
<p><strong>Key Features:</strong>
- <strong>RFC8785 Compliance</strong>: Canonical JSON serialization for deterministic signature generation
- <strong>Type Safety</strong>: Pydantic-based validation with comprehensive type hints
- <strong>Abstract Base Classes</strong>: Define contracts for permits, signatures, verification results, and confirmations
- <strong>Protocol Messages</strong>: Standardized HTTP 402 request/response payload schemas
- <strong>Version Management</strong>: Protocol version negotiation and compatibility handling
- <strong>Blockchain Agnostic</strong>: Base models inherited by all blockchain-specific implementations</p>
<p><strong>Main Components:</strong>
- <code>CanonicalModel</code>: RFC8785-compliant base model with deterministic JSON serialization
- Abstract types: <code>BasePermit</code>, <code>BaseSignature</code>, <code>BaseVerificationResult</code>, <code>BaseTransactionConfirmation</code>
- HTTP protocol: <code>ClientRequestHeader</code>, <code>Server402ResponsePayload</code>, <code>ClientTokenRequest</code>, <code>ServerTokenResponse</code>
- Payment models: <code>BasePaymentComponent</code> defining payment requirements
- Status enums: <code>VerificationStatus</code>, <code>TransactionStatus</code>
- Version handling: <code>ProtocolVersion</code>, <code>SupportedVersions</code></p>
<p><strong>Purpose:</strong>
Serves as the type foundation ensuring consistent data structures and validations across servers, clients, adapters, and engine components.</p>


<div class="doc doc-object doc-module">



<h2 id="x402_mock.schemas" class="doc doc-heading">
            <code>x402_mock.schemas</code>


</h2>

    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.CanonicalModel" class="doc doc-heading">
            <code>CanonicalModel</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>RFC8785-compliant Pydantic base model with canonical JSON serialization.</p>
<p>This model ensures consistent, deterministic JSON representation suitable
for cryptographic operations, signature verification, and hashing.</p>


<details class="features" open>
  <summary>Features</summary>
  <ul>
<li>Automatic conversion of Pydantic objects, enums, and Decimals to standard types</li>
<li>Deterministic key sorting in JSON output</li>
<li>No extra whitespace for consistent hashing and signature verification</li>
<li>RFC8785 compliance for canonical JSON representation</li>
</ul>
</details>        <p>All schema models should inherit from this class to ensure consistent
serialization across the system.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>class MyModel(CanonicalModel):
    name: str
    value: int</p>
<p>model = MyModel(name="test", value=123)
canonical_json = model.to_canonical_json()  # Guaranteed consistent format</p>
</details>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.CanonicalModel.to_canonical_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_canonical_json</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert model to RFC8785-compliant canonical JSON string.</p>
<p>This method ensures that the JSON representation is:
1. Deterministically ordered (sorted keys)
2. Whitespace-minimal (compact format)
3. Suitable for cryptographic operations</p>
<p>The conversion process:
1. model_dump(mode="json") converts Pydantic objects, enums, and Decimals
   to standard Python types (str, int, float, etc.)
2. json.dumps with separators and sort_keys ensures RFC8785 compliance</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RFC8785-compliant JSON string with sorted keys and no extra whitespace.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>model = MyModel(name="test", value=123)
json_str = model.to_canonical_json()</p>
<h5 id="x402_mock.schemas.CanonicalModel.to_canonical_json--returns-nametestvalue123">Returns: '{"name":"test","value":123}'</h5>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.CanonicalModel.to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert model to dictionary representation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: Dictionary with all model fields.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.BaseSignature" class="doc doc-heading">
            <code>BaseSignature</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CanonicalModel (x402_mock.schemas.bases.CanonicalModel)" href="#x402_mock.schemas.CanonicalModel">CanonicalModel</a></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for blockchain signature components.</p>
<p>This class defines the interface that all blockchain-specific signature
implementations must follow. Different blockchains use different signature
formats (e.g., EIP2612 for EVM uses v/r/s, Solana uses 64-byte signature).</p>
<p>All concrete signature classes should inherit from this base class and
implement the abstract methods to ensure consistent signature handling
across the system.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseSignature.signature_type">signature_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of signature (e.g., "EIP2612", "Solana")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseSignature.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when the signature was created</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="validate_format() -> bool (x402_mock.schemas.BaseSignature.validate_format)" href="#x402_mock.schemas.BaseSignature.validate_format">validate_format</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if signature format is valid for the blockchain</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="to_dict() -> Dict[str, Any] (x402_mock.schemas.BaseSignature.to_dict)" href="#x402_mock.schemas.CanonicalModel.to_dict">to_dict</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Convert signature to dictionary (inherited from CanonicalModel)</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BaseSignature.validate_format" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_format</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate the signature format for the specific blockchain.</p>
<p>This method should check that all signature components are in valid format
for the target blockchain. For example:
- EIP2612: Check v is 27 or 28, r and s are 64 hex chars
- Solana: Check signature is 64 bytes</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if signature format is valid, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If signature format is invalid with descriptive message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.BasePermit" class="doc doc-heading">
            <code>BasePermit</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CanonicalModel (x402_mock.schemas.bases.CanonicalModel)" href="#x402_mock.schemas.CanonicalModel">CanonicalModel</a></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for blockchain permit/approval mechanisms.</p>
<p>A permit is a signed message that authorizes a spender to transfer tokens
on behalf of the token owner. Different blockchains implement permits
differently (EIP2612 for EVM, etc.).</p>
<p>This base class provides the minimal common fields across all permit types.
Blockchain-specific implementations should extend this class and add their
specific fields such as owner, spender, token, value, and nonce.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePermit.permit_type">permit_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of permit (e.g., "EIP2612", "Solana")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePermit.signature">signature</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="BaseSignature (x402_mock.schemas.bases.BaseSignature)" href="#x402_mock.schemas.BaseSignature">BaseSignature</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signature components for permit authorization</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePermit.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when permit was created</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="validate_structure() -> bool (x402_mock.schemas.BasePermit.validate_structure)" href="#x402_mock.schemas.BasePermit.validate_structure">validate_structure</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Validate permit structure (blockchain-specific)</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BasePermit.validate_structure" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_structure</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate the permit structure and required fields for the blockchain.</p>
<p>Should check that all required fields are present and in valid format
for the specific blockchain permit type.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if permit structure is valid, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If permit structure is invalid with descriptive message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.BasePaymentComponent" class="doc doc-heading">
            <code>BasePaymentComponent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CanonicalModel (x402_mock.schemas.bases.CanonicalModel)" href="#x402_mock.schemas.CanonicalModel">CanonicalModel</a></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for payment requirement specifications.</p>
<p>Payment components define what payment is expected: the amount, currency,
and any additional payment-related constraints or metadata.
Blockchain-specific implementations (e.g., EVM, SVM) should extend this class
and add their specific fields such as token addresses.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePaymentComponent.payment_type">payment_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of payment (e.g., "evm", "svm")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePaymentComponent.amount">amount</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Payment amount for human readability</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePaymentComponent.currency">currency</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Currency code (e.g., "USD", "ETH")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePaymentComponent.metadata">metadata</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional payment-related metadata</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BasePaymentComponent.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when payment component was created</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BasePaymentComponent.validate_payment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_payment</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate the payment specification.</p>
<p>Should check that payment type, amount, and token are valid and
compatible with the system requirements.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if payment specification is valid, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If payment specification is invalid with descriptive message.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.VerificationStatus" class="doc doc-heading">
            <code>VerificationStatus</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>



        <p>Enumeration of possible verification result statuses.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.SUCCESS">SUCCESS</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Permit signature is valid and verification passed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.INVALID_SIGNATURE">INVALID_SIGNATURE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signature is invalid or signer mismatch</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.EXPIRED">EXPIRED</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Permit deadline has passed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.INSUFFICIENT_ALLOWANCE">INSUFFICIENT_ALLOWANCE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authorized amount is insufficient</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.INSUFFICIENT_BALANCE">INSUFFICIENT_BALANCE</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token balance insufficient for transaction</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.REPLAY_ATTACK">REPLAY_ATTACK</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nonce indicates potential replay attack</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.BLOCKCHAIN_ERROR">BLOCKCHAIN_ERROR</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error querying blockchain state</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.VerificationStatus.UNKNOWN_ERROR">UNKNOWN_ERROR</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unexpected error during verification</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.BaseVerificationResult" class="doc doc-heading">
            <code>BaseVerificationResult</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CanonicalModel (x402_mock.schemas.bases.CanonicalModel)" href="#x402_mock.schemas.CanonicalModel">CanonicalModel</a></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for permit signature verification results.</p>
<p>This class encapsulates the result of verifying a permit signature and
checking permit validity on-chain. It provides a standard interface for
reporting verification status, success/failure details, and diagnostic information.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.verification_type">verification_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of verification (e.g., "evm", "svm")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.status">status</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="VerificationStatus (x402_mock.schemas.bases.VerificationStatus)" href="#x402_mock.schemas.VerificationStatus">VerificationStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Verification result status (VerificationStatus enum)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.is_valid">is_valid</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Boolean indicating if verification was successful</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.message">message</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Human-readable status message</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.error_details">error_details</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Detailed error information if verification failed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseVerificationResult.verified_at">verified_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when verification was performed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="is_success() -> bool (x402_mock.schemas.BaseVerificationResult.is_success)" href="#x402_mock.schemas.BaseVerificationResult.is_success">is_success</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if verification was successful</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="get_error_message() -> Optional[str] (x402_mock.schemas.BaseVerificationResult.get_error_message)" href="#x402_mock.schemas.BaseVerificationResult.get_error_message">get_error_message</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get formatted error message</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BaseVerificationResult.is_success" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_success</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if verification was successful.</p>
<p>Convenience method to check if the verification passed.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if verification was successful, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>result = await adapter.verify_signature(permit, payment)
if result.is_success():
    # Proceed with transaction
else:
    # Handle verification failure</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BaseVerificationResult.get_error_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_error_message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get formatted error message from verification result.</p>
<p>Returns a human-readable error message explaining why verification failed.
Returns None if verification was successful.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[str]: Error message if verification failed, None if successful.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>if not result.is_success():
    error_msg = result.get_error_message()
    print(f"Verification failed: {error_msg}")</p>
</details>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.TransactionStatus" class="doc doc-heading">
            <code>TransactionStatus</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>



        <p>Enumeration of possible transaction execution statuses.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.SUCCESS">SUCCESS</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction executed successfully on-chain</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.FAILED">FAILED</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction reverted or failed on-chain</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.PENDING">PENDING</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction is pending confirmation</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.INSUFFICIENT_GAS">INSUFFICIENT_GAS</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction failed due to insufficient gas</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.TIMEOUT">TIMEOUT</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction confirmation timed out</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.NETWORK_ERROR">NETWORK_ERROR</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Network error during transaction submission</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.INVALID_TRANSACTION">INVALID_TRANSACTION</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction is malformed or invalid</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.TransactionStatus.UNKNOWN_ERROR">UNKNOWN_ERROR</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unexpected error during transaction execution</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.BaseTransactionConfirmation" class="doc doc-heading">
            <code>BaseTransactionConfirmation</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CanonicalModel (x402_mock.schemas.bases.CanonicalModel)" href="#x402_mock.schemas.CanonicalModel">CanonicalModel</a></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract base class for blockchain transaction confirmation/receipt data.</p>
<p>This class captures the result of executing a transaction on-chain, including
execution status, timing, and confirmation information.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.confirmation_type">confirmation_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of confirmation (e.g., "evm", "svm")</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.status">status</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TransactionStatus (x402_mock.schemas.bases.TransactionStatus)" href="#x402_mock.schemas.TransactionStatus">TransactionStatus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction execution status (TransactionStatus enum)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.execution_time">execution_time</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time taken to confirm transaction (in seconds)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.confirmations">confirmations</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of block confirmations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.error_message">error_message</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error message if transaction failed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.logs">logs</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional transaction logs/events</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.BaseTransactionConfirmation.created_at">created_at</span></code></td>
            <td>
                  <code><span title="datetime.datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Timestamp when confirmation was recorded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="is_success() -> bool (x402_mock.schemas.BaseTransactionConfirmation.is_success)" href="#x402_mock.schemas.BaseTransactionConfirmation.is_success">is_success</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Check if transaction executed successfully</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="get_confirmation_status() -> str (x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status)" href="#x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status">get_confirmation_status</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get human-readable confirmation status</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BaseTransactionConfirmation.is_success" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_success</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if transaction executed successfully on-chain.</p>
<p>Returns True if the transaction was executed without errors and achieved
the intended state change on the blockchain.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if transaction succeeded, False if failed or pending.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>confirmation = await adapter.send_transaction(permit)
if confirmation.is_success():
    print(f"Transaction confirmed: {confirmation.tx_hash}")
else:
    print(f"Transaction failed: {confirmation.error_message}")</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_confirmation_status</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get human-readable confirmation status message.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Human-readable status message describing transaction state.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>status_msg = confirmation.get_confirmation_status()</p>
<h5 id="x402_mock.schemas.BaseTransactionConfirmation.get_confirmation_status--may-return-transaction-confirmed-with-10-confirmations">May return: "Transaction confirmed with 10 confirmations"</h5>
</details>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.ClientRequestHeader" class="doc doc-heading">
            <code>ClientRequestHeader</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>HTTP request headers sent by client.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ClientRequestHeader.content_type">content_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>MIME type of request body (default: application/json).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ClientRequestHeader.authorization">authorization</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional bearer token for authenticated requests.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.ServerPaymentScheme" class="doc doc-heading">
            <code>ServerPaymentScheme</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Payment scheme configuration for client payment authorization.</p>
<p>Describes the specific payment requirements and supported payment methods
that the client must fulfill to access the protected resource.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerPaymentScheme.payment_components">payment_components</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="x402_mock.adapters.unions.PaymentComponentTypes">PaymentComponentTypes</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of supported payment options/requirements.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerPaymentScheme.protocol_version">protocol_version</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Version of the payment protocol being used.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.Server402ResponsePayload" class="doc doc-heading">
            <code>Server402ResponsePayload</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Server response payload for 402 Payment Required status.</p>
<p>This is returned by the server when client attempts to access a protected
resource without valid authorization. It instructs the client where to submit
payment and what payment methods are accepted.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.Server402ResponsePayload.access_token_endpoint">access_token_endpoint</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL endpoint for POST request to obtain access token.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.Server402ResponsePayload.payment_scheme">payment_scheme</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ServerPaymentScheme (x402_mock.schemas.https.ServerPaymentScheme)" href="#x402_mock.schemas.ServerPaymentScheme">ServerPaymentScheme</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Payment requirements and accepted payment methods.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.Server402ResponsePayload.payment_instruction">payment_instruction</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional instruction explaining payment process and endpoint usage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.ClientTokenRequest" class="doc doc-heading">
            <code>ClientTokenRequest</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Client request to exchange permit for access token.</p>
<p>The client sends this request to the server's access token endpoint after
generating a valid permit that authorizes the payment. The server validates
the permit and returns an access token if the permit is valid.</p>
<p>This request should be sent as POST with JSON body.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ClientTokenRequest.version">version</span></code></td>
            <td>
                  <code><span title="x402_mock.schemas.versions.ProtocalVersion">ProtocalVersion</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Protocol version of the permit.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ClientTokenRequest.permit">permit</span></code></td>
            <td>
                  <code><span title="x402_mock.adapters.unions.PermitTypes">PermitTypes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Signed permit authorizing the payment.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.schemas.ServerTokenResponse" class="doc doc-heading">
            <code>ServerTokenResponse</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Server response containing access token and metadata.</p>
<p>Returned when server successfully verifies and accepts a client's permit.
The access token is used by client to access the protected resource.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerTokenResponse.access_token">access_token</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Bearer token for authenticating subsequent requests.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerTokenResponse.token_type">token_type</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of token (typically "Bearer").</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerTokenResponse.expires_in">expires_in</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Token lifetime in seconds. None means token never expires.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.schemas.ServerTokenResponse.metadata">metadata</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional metadata about the token or authorization.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div><h2 id="engine">Engine</h2>
<p><strong>Event-Driven Execution Engine</strong></p>
<p>The Engine module implements a sophisticated event-driven architecture for orchestrating payment protocol workflows. It provides a typed event system with an event bus that allows subscribers to hook into the payment lifecycle, monitor execution flow, capture errors, and customize behavior at critical execution points.</p>
<p><strong>Key Features:</strong>
- <strong>Typed Event System</strong>: Strongly-typed events representing each stage of payment processing
- <strong>Event Bus</strong>: Publish-subscribe pattern for decoupled event handling
- <strong>Hook Subscription</strong>: Use <code>add_hook()</code> to subscribe handlers to specific event types
- <strong>Event Chain Execution</strong>: Sequential event processing with state transitions
- <strong>Comprehensive Events</strong>: Request initialization, token exchange, verification, settlement, errors
- <strong>Dependency Injection</strong>: Clean separation of business logic from infrastructure dependencies
- <strong>Exception Hierarchy</strong>: Rich exception types for granular error handling
- <strong>Async-Native</strong>: Built for asynchronous execution with asyncio support</p>
<p><strong>Key Event Types:</strong>
- <code>RequestInitEvent</code>: Initial request with optional authorization token
- <code>RequestTokenEvent</code>: Payment permit submission for token exchange
- <code>Http402PaymentEvent</code>: Payment required response with payment schemes
- <code>VerifySuccessEvent</code> / <code>VerifyFailedEvent</code>: Signature verification results
- <code>SettleSuccessEvent</code> / <code>SettleFailedEvent</code>: On-chain settlement outcomes
- <code>TokenIssuedEvent</code>: Successful access token generation
- <code>AuthorizationSuccessEvent</code>: Successful request authorization</p>
<p><strong>Main Components:</strong>
- <code>EventBus</code>: Central event dispatcher with subscriber management
- <code>EventChain</code>: Orchestrates event sequence execution
- <code>Dependencies</code>: Immutable container for shared infrastructure
- Typed events: All events inherit from <code>BaseEvent</code>
- Custom exceptions: Detailed error types for different failure scenarios</p>
<p><strong>Usage Pattern:</strong>
Developers can subscribe custom handlers to events using <code>event_bus.subscribe(EventType, handler)</code> to intercept events, log transactions, trigger webhooks, or implement custom business logic at any point in the payment flow.</p>


<div class="doc doc-object doc-module">



<h2 id="x402_mock.engine" class="doc doc-heading">
            <code>x402_mock.engine</code>


</h2>

    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.BaseEvent" class="doc doc-heading">
            <code>BaseEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>



        <p>Base class for all events in the system.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.BaseEvent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>String representation of the event.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.RequestInitEvent" class="doc doc-heading">
            <code>RequestInitEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>External trigger: Initialize request with token.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.RequestTokenEvent" class="doc doc-heading">
            <code>RequestTokenEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>External trigger: Request access token with payment permit.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.AuthorizationSuccessEvent" class="doc doc-heading">
            <code>AuthorizationSuccessEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Authorization succeeded with verified payload.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.Http402PaymentEvent" class="doc doc-heading">
            <code>Http402PaymentEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Payment required - 402 response payload.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.VerifySuccessEvent" class="doc doc-heading">
            <code>VerifySuccessEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Payment verification succeeded.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.VerifyFailedEvent" class="doc doc-heading">
            <code>VerifyFailedEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Payment verification failed.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.SettleFailedEvent" class="doc doc-heading">
            <code>SettleFailedEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Settlement failed.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.SettleSuccessEvent" class="doc doc-heading">
            <code>SettleSuccessEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Settlement succeeded.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.Dependencies" class="doc doc-heading">
            <code>Dependencies</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



        <p>Container for infrastructure dependencies (read-only).</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.EventBus" class="doc doc-heading">
            <code>EventBus</code>


</h3>


    <div class="doc doc-contents ">



        <p>Event dispatcher for publishing and subscribing to events.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventBus.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize with empty subscribers and hooks.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventBus.subscribe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">subscribe</span><span class="p">(</span><span class="n">event_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">],</span> <span class="n">handler</span><span class="p">:</span> <span class="n">EventHandlerFunc</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register an async handler for the given event class.
Multiple handlers can be subscribed to the same event type and run in parallel.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The event class to subscribe to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><span title="x402_mock.engine.events.EventHandlerFunc">EventHandlerFunc</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The async handler function to call when the event is published.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If handler is not a coroutine function.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventBus.hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hook</span><span class="p">(</span><span class="n">event_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">],</span> <span class="n">hook_func</span><span class="p">:</span> <span class="n">EventHookFunc</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register a hook for the given event class.
Hooks are executed before subscribers when the event is dispatched.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The event class to hook into.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hook_func</code>
            </td>
            <td>
                  <code><span title="x402_mock.engine.events.EventHookFunc">EventHookFunc</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The hook function to call when the event is published.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventBus.dispatch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">dispatch</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">BaseEvent</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="n">Dependencies</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Dispatch an event to all registered hooks and subscribers.
Hooks run first (synchronously in order), then all subscribers run in parallel.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The event to dispatch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deps</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Dependencies


  
      dataclass
   (x402_mock.engine.events.Dependencies)" href="#x402_mock.engine.Dependencies">Dependencies</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dependencies container with injected services.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.AsyncGenerator">AsyncGenerator</span>[<span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>], None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Results from all subscribers as they complete. Yields nothing if no subscribers are registered.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.TokenIssuedEvent" class="doc doc-heading">
            <code>TokenIssuedEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Result: Access token issued after successful verification.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.BreakEvent" class="doc doc-heading">
            <code>BreakEvent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a></code></p>



        <p>Internal event to break the event chain.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.EventChain" class="doc doc-heading">
            <code>EventChain</code>


</h3>


    <div class="doc doc-contents ">



        <p>Executes event-driven workflows by chaining event handler results.</p>
<p>Supports early return mechanism: when an event matching early_return_on is encountered,
execute() returns that event immediately while remaining processing continues in background.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventChain.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">event_bus</span><span class="p">:</span> <span class="n">EventBus</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="n">Dependencies</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize event chain executor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>event_bus</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EventBus (x402_mock.engine.events.EventBus)" href="#x402_mock.engine.EventBus">EventBus</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The event bus to dispatch events through.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deps</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Dependencies


  
      dataclass
   (x402_mock.engine.events.Dependencies)" href="#x402_mock.engine.Dependencies">Dependencies</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dependencies container to pass to handlers.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="x402_mock.engine.EventChain.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">initial_event</span><span class="p">:</span> <span class="n">BaseEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">BaseEvent</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Execute event chain starting from initial event.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.AsyncGenerator">AsyncGenerator</span>[<a class="autorefs autorefs-internal" title="BaseEvent (x402_mock.engine.events.BaseEvent)" href="#x402_mock.engine.BaseEvent">BaseEvent</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Yields events encountered during chain execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>When early return is triggered, subsequent events continue processing 
asynchronously in background without blocking the return.</p>
</details>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.BaseException" class="doc doc-heading">
            <code>BaseException</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Root exception class for all project-specific exceptions.</p>
<p>All custom exceptions should inherit from this class to enable
unified exception handling and centralized error processing.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.AuthenticationError" class="doc doc-heading">
            <code>AuthenticationError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Raised when authentication fails or credentials are invalid.</p>
<p>This includes scenarios such as:
- Invalid or expired access tokens
- Missing authentication headers
- Authentication signature verification failure</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.PaymentMethodError" class="doc doc-heading">
            <code>PaymentMethodError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Raised when a payment method is invalid or unsupported.</p>
<p>This includes scenarios such as:
- Unsupported payment type (on-chain vs off-chain mismatch)
- Missing required payment method configuration
- Payment method not registered on server</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.PaymentSignatureError" class="doc doc-heading">
            <code>PaymentSignatureError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Raised when payment signature generation or processing fails.</p>
<p>This includes scenarios such as:
- Signature format validation failure
- Private key access issues
- Signature encoding errors</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.TokenError" class="doc doc-heading">
            <code>TokenError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Base exception for token-related errors.</p>
<p>Parent class for all token validation and management errors.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.TokenExpiredError" class="doc doc-heading">
            <code>TokenExpiredError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TokenError (x402_mock.engine.exceptions.TokenError)" href="#x402_mock.engine.TokenError">TokenError</a></code></p>



        <p>Raised when a token has expired and is no longer valid.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.TokenExpiredError.expiration_time">expiration_time</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When the token expired</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.InvalidTokenError" class="doc doc-heading">
            <code>InvalidTokenError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TokenError (x402_mock.engine.exceptions.TokenError)" href="#x402_mock.engine.TokenError">TokenError</a></code></p>



        <p>Raised when a token is invalid or malformed.</p>
<p>This includes scenarios such as:
- Corrupted token data
- Invalid token signature
- Unsupported token version</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.TokenNotFoundError" class="doc doc-heading">
            <code>TokenNotFoundError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TokenError (x402_mock.engine.exceptions.TokenError)" href="#x402_mock.engine.TokenError">TokenError</a></code></p>



        <p>Raised when a requested token cannot be found.</p>
<p>Typically occurs in token lookup or retrieval operations.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.PaymentVerificationError" class="doc doc-heading">
            <code>PaymentVerificationError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Base exception for payment verification failures.</p>
<p>Parent class for all errors that occur during payment validation.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.SignatureVerificationError" class="doc doc-heading">
            <code>SignatureVerificationError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="PaymentVerificationError (x402_mock.engine.exceptions.PaymentVerificationError)" href="#x402_mock.engine.PaymentVerificationError">PaymentVerificationError</a></code></p>



        <p>Raised when permit signature verification fails.</p>
<p>This includes scenarios such as:
- Invalid ECDSA signature
- Signature from wrong address
- Tampered signature data
- Signer address mismatch</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.SignatureVerificationError.permit_type">permit_type</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of permit being verified</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.SignatureVerificationError.signer">signer</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Expected signer address</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.SignatureVerificationError.recovered">recovered</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Actually recovered address from signature</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.PermitExpiredError" class="doc doc-heading">
            <code>PermitExpiredError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="PaymentVerificationError (x402_mock.engine.exceptions.PaymentVerificationError)" href="#x402_mock.engine.PaymentVerificationError">PaymentVerificationError</a></code></p>



        <p>Raised when a permit has expired and can no longer be executed.</p>
<p>The permit deadline has passed on the blockchain.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.PermitExpiredError.deadline">deadline</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The expired permit deadline</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.PermitExpiredError.current_time">current_time</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current block timestamp</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.PermitNonceError" class="doc doc-heading">
            <code>PermitNonceError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="PaymentVerificationError (x402_mock.engine.exceptions.PaymentVerificationError)" href="#x402_mock.engine.PaymentVerificationError">PaymentVerificationError</a></code></p>



        <p>Raised when permit nonce is invalid or already used.</p>
<p>This protects against replay attacks by ensuring each permit
has a unique nonce that increments with each use.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.PermitNonceError.expected_nonce">expected_nonce</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nonce expected on-chain</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.PermitNonceError.provided_nonce">provided_nonce</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nonce in the permit</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.InsufficientFundsError" class="doc doc-heading">
            <code>InsufficientFundsError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="PaymentVerificationError (x402_mock.engine.exceptions.PaymentVerificationError)" href="#x402_mock.engine.PaymentVerificationError">PaymentVerificationError</a></code></p>



        <p>Raised when account balance is insufficient for the payment.</p>
<p>This includes scenarios such as:
- Token balance less than permit amount
- Insufficient gas for transaction execution</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.InsufficientFundsError.required">required</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amount required</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.InsufficientFundsError.available">available</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amount available</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.ConfigurationError" class="doc doc-heading">
            <code>ConfigurationError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Raised when configuration is missing or invalid.</p>
<p>This includes scenarios such as:
- Missing required configuration keys
- Invalid configuration values
- RPC URL unreachable
- Unsupported network configuration</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.InvalidTransition" class="doc doc-heading">
            <code>InvalidTransition</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Raised when an invalid state transition occurs in event processing.</p>
<p>This indicates that the payment state machine received an event
that is not valid for the current state.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.InvalidTransition.current_state">current_state</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current payment/transaction state</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.InvalidTransition.event_type">event_type</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Event that triggered the transition</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.InvalidTransition.message">message</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of why transition is invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.BlockchainInteractionError" class="doc doc-heading">
            <code>BlockchainInteractionError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseException (x402_mock.engine.exceptions.BaseException)" href="#x402_mock.engine.BaseException">BaseException</a></code></p>



        <p>Raised when blockchain interaction (RPC call) fails.</p>
<p>This includes scenarios such as:
- RPC call timeout
- Network connectivity issues
- Invalid contract address
- Contract call revert</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.BlockchainInteractionError.rpc_method">rpc_method</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RPC method that was called (e.g., 'eth_call')</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.BlockchainInteractionError.reason">reason</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Error reason from blockchain node</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="x402_mock.engine.TransactionExecutionError" class="doc doc-heading">
            <code>TransactionExecutionError</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BlockchainInteractionError (x402_mock.engine.exceptions.BlockchainInteractionError)" href="#x402_mock.engine.BlockchainInteractionError">BlockchainInteractionError</a></code></p>



        <p>Raised when blockchain transaction execution fails.</p>
<p>This includes scenarios such as:
- Transaction reverted on-chain
- Out of gas
- Invalid transaction parameters
- Nonce conflicts</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.TransactionExecutionError.tx_hash">tx_hash</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transaction hash if available</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="x402_mock.engine.TransactionExecutionError.revert_reason">revert_reason</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason transaction was reverted</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>